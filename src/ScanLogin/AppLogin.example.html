<html>
<pre>
<?php
include __DIR__ . '/vendor/autoload.php';

use Vipkwd\Utils\Dev;
use Vipkwd\Utils\ScanLogin\AppLogin;


$WebLogin = AppLogin::instance([
    'web_pusher_url' => 'https://demo.com/ws/api',
    'salt_key' => '' //指定消息签名盐值
]);

$clientId = 'clientID000000';
$qrcodeId = 'qrcodeId000000';
$event = 'login-admin';
$userId = 10010;

//监听扫码完成“确认授权”事件
$params = [];
$res = $WebLogin->scanEventComplete($clientId, $qrcodeId, $event, $params, $userId);
if($res !== null){
    Dev::dumper($res,1);
}


//监听“扫码”事件
$text = 'ev.login-admins|39c0fb8cmMDV/vEEbZpNjv6eRZrFSrWkJQ5mzSmxdviD97trCQ1M0jD+Z8VyVR6wkwqcCoOhE2JJn1ujDxrMZ1Ms0U8Ca1YpeOS9XIJXNhJXCb86+3Q3+n/cqYD7OI5jPEq3h++WoeQP0weyB/mYqDkNV4wimnXXvs56ugUaJNeGFVSzAYU73igSZZ22s';
Dev::dumper($WebLogin->scanEventInvoke($text, $userId),1);

//监听生成新二维码(header自动输出图片)
$WebLogin->createQrcode($clientId, $qrcodeId, $event, []);

</pre></html>